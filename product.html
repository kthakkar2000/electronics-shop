<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product — Electronics Shop</title>
  <style>
    .site-header{background:#fff;padding:12px 0;box-shadow:0 6px 18px rgba(12,12,14,0.04);margin-bottom:14px;border-bottom:1px solid #f0f0f0}
.header-inner{display:flex;align-items:center;justify-content:center}
.site-logo{height:70px;object-fit:contain}

    :root{--accent:#0b6ef2;--muted:#6b7280;--card:#fff;--bg:#f3f4f6}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:var(--bg);margin:0;color:#111}
    .container{max-width:980px;margin:28px auto;padding:20px}
    .card{background:var(--card);border-radius:14px;padding:20px;box-shadow:0 6px 18px rgba(12,12,14,0.06)}
    .top{display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap}
    .gallery{flex:1 1 380px;min-width:260px}
    .main-img{width:100%;height:360px;object-fit:contain;border-radius:10px;background:#fff;padding:12px;border:1px solid #eee}
    .thumbs{display:flex;gap:8px;margin-top:10px}
    .thumbs img{width:72px;height:56px;object-fit:cover;border-radius:8px;cursor:pointer;border:2px solid transparent}
    .thumbs img.active{border-color:var(--accent)}
    .details{flex:1 1 340px;min-width:260px}
    h1{margin:0 0 8px;font-size:20px}
    .sku{color:var(--muted);font-size:13px;margin-bottom:12px}
    .price{font-size:22px;color:var(--accent);margin:6px 0}
    .specs{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:12px}
    .spec{background:#fbfcfe;border-radius:8px;padding:10px;font-size:14px}
    .cta{margin-top:18px;display:flex;gap:10px;flex-wrap:wrap}
    button.primary{background:var(--accent);color:#fff;border:none;padding:12px 16px;border-radius:10px;font-weight:600;cursor:pointer}
    button.secondary{background:#fff;border:1px solid #e6e9ef;padding:12px 14px;border-radius:10px;cursor:pointer}
    .desc{margin-top:18px;line-height:1.5;color:#222}
    .modal-backdrop{position:fixed;inset:0;background:rgba(10,12,15,0.45);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:#fff;border-radius:12px;width:95%;max-width:720px;padding:16px;box-shadow:0 20px 50px rgba(10,10,15,0.2)}
    .chat-area{height:320px;overflow:auto;border:1px dashed #eee;border-radius:8px;padding:12px;background:#fbfdff}
    .msg{margin:8px 0;display:flex;gap:10px}
    .msg.me{justify-content:flex-end}
    .bubble{max-width:78%;padding:10px 12px;border-radius:12px;background:#fff;border:1px solid #efefef}
    .bubble.bot{background:#f1f7ff;border-color:#dbeeff}
    .controls{display:flex;gap:8px;margin-top:12px;align-items:center}
    .mic{background:linear-gradient(180deg,#fff,#f7fafc);border:1px solid #eee;padding:10px;border-radius:12px;cursor:pointer}
    .status{color:var(--muted);font-size:13px;margin-left:8px}
    .small{font-size:13px;color:var(--muted)}
    @media(max-width:720px){.top{flex-direction:column}.main-img{height:260px}}
  </style>
</head>
<body>
  <header class="site-header">
  <div class="container header-inner">
    <img src="https://kthakkar2000.github.io/electronics-shop/assets/ktpl%20new%20logo.png" alt="Kalindi Tradelinks Pvt Ltd" class="site-logo" />
  </div>
</header>
  <div class="container">
    <div class="card">
      <div class="top">
        <div class="gallery">
          <img id="mainImg" class="main-img" src="" alt="product image" />
          <div class="thumbs" id="thumbs"></div>
        </div>

        <div class="details">
          <h1 id="title">Product Title</h1>
          <div class="sku" id="sku">SKU: -</div>
          <div class="price" id="price">₹0</div>
          <div class="specs" id="specs"></div>

          <div class="cta">
            <button class="primary" id="askBtn">Ask about this product</button>
            <button class="secondary" id="buyBtn">Buy / Enquire</button>

            <div style="margin-left:8px;display:flex;align-items:center;gap:8px">
              <label class="small">Language</label>
              <select id="langSelect" style="padding:8px;border-radius:8px;border:1px solid #eee">
                <option value="en">English</option>
                <option value="gu">ગુજરાતી</option>
              </select>
            </div>
          </div>

          <div class="qr-wrap">
            <div>
              <div class="small">Scan to open this page</div>
              <img id="qrImg" src="" alt="QR code" />
            </div>
            <div class="small">
              <div>Share this QR with customers — or print & stick.</div>
              <div style="margin-top:8px;color:#444">URL: <span id="pageUrl" style="font-weight:600"></span></div>
            </div>
          </div>

        </div>
      </div>

      <div class="desc card" style="margin-top:18px;padding:14px;">
        <strong>Product description</strong>
        <p id="description" style="margin-top:8px;color:#333"></p>
      </div>
    </div>
  </div>

  <!-- modal for voice/chat -->
  <div id="modalBackdrop" class="modal-backdrop">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Product voice assistant">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Product Assistant</h3>
        <button id="closeModal" class="secondary">Close</button>
      </div>
      <div style="margin-top:12px" class="small">Tap mic and speak. Assistant will reply aloud & show text.</div>
      <div id="chatArea" class="chat-area" aria-live="polite"></div>

      <div class="controls">
        <button id="micBtn" class="mic">🎤 Start Listening</button>
        <div id="recStatus" class="status">Idle</div>
        <div style="flex:1"></div>
        <input id="manualInput" placeholder="Or type a question..." style="padding:8px;border-radius:8px;border:1px solid #eee;width:45%" />
        <button id="sendBtn" class="primary">Send</button>
      </div>
    </div>
  </div>

<script>
/* ---------- Product data (single-file) ---------- */
const products = {
  "washing-machine-001":{
    id:"washing-machine-001",
    title:"SuperClean 7kg Front Load Washing Machine",
    title_gu:"સુપરસ્ઈન 7 કિગ્રા ફ્રન્ટ લોડ વોશિંગ મશીન",
    sku:"WM-SC-7000",
    price:21990,
  images:[
  "https://kthakkar2000.github.io/electronics-shop/assets/wm1.avif",
  "https://kthakkar2000.github.io/electronics-shop/assets/wm2.avif",
  "https://kthakkar2000.github.io/electronics-shop/assets/wm3.avif",
  "https://kthakkar2000.github.io/electronics-shop/assets/wm4.avif",
  "https://kthakkar2000.github.io/electronics-shop/assets/wm5.avif"
],
    specs:{
      "Capacity":"7 kg",
      "Type":"Front Load",
      "Energy Rating":"5 Star",
      "Warranty":"2 years (product) + 5 years (motor)",
      "Delivery":"4-7 business days"
    },
    specs_gu:{
      "Capacity":"7 કિગ્રા",
      "Type":"ફ્રન્ટ લોડ",
      "Energy Rating":"5 સ્ટાર",
      "Warranty":"2 વર્ષ (પ્રોડક્ટ) + 5 વર્ષ (મોટર)",
      "Delivery":"4-7 બિઝનેસ દિવસ"
    },
    colors:["White","Silver","Grey"],
    colors_gu:["સફેદ","સિલ્વર","ગ્રે"],
    advantages:[
      "Low energy consumption",
      "Quick wash in 30 minutes",
      "Gentle on fabrics",
      "In-built heater for tough stains"
    ],
    advantages_gu:[
      "ઓછી ઊર્જા ક્ષેપણ",
      "30 મિનિટમાં ક્વિક વૉશ",
      "કપડાંઓ ઉપર નરમ",
      "કઠિન દાગ માટે બિલ્ટ-ઇન હીટર"
    ],
    description:"A reliable 7kg front load washing machine with modern features, quick cycles, and low power usage. Ideal for small to medium families. Key Features

Capacity: 7 kg – ideal for small to medium families.

Wash Programs: Multiple modes (Quick Wash, Heavy, Delicate, Eco, Wool, etc.) to suit all fabric types.

Spin Speed: 1200 RPM for faster drying.

Inverter Technology: Saves energy and reduces noise.

Smart Wash: Automatically adjusts water and detergent levels based on load.

Drum Type: Stainless steel drum for durability and gentle fabric care.

Safety: Child lock and overflow protection.

Display: Digital LED panel with touch controls.

Energy Rating: 5 Star – low electricity & water consumption.

Benefits:
✔ Cleaner clothes with less detergent
✔ Saves water & electricity
✔ Quiet and smooth operation
✔ Long-lasting performance

Dimensions: H 85 cm × W 60 cm × D 55 cm
Warranty: 2 years on product, 10 years on motor:
    description_gu:"આ આધુનિક અને વિશ્વસનીય 7 કિગ્રા ફ્રન્ટ લોડ વોશિંગ મશીન છે. નાનું/મધ્યમ પરિવાર માટે યોગ્ય — ઝડપી સાયકલ અને ઓછા વીજ ઉપભોગ સાથે."
  }
};

/* ---------- helpers ---------- */
function getQueryParam(name){ return new URL(location.href).searchParams.get(name); }
const id = getQueryParam('id') || 'washing-machine-001';
const product = products[id] || products['washing-machine-001'];
let LANG = getQueryParam('lang') || 'en';

/* DOM refs */
const titleEl = document.getElementById('title');
const skuEl = document.getElementById('sku');
const priceEl = document.getElementById('price');
const descEl = document.getElementById('description');
const pageUrlEl = document.getElementById('pageUrl');
const mainImg = document.getElementById('mainImg');
const thumbs = document.getElementById('thumbs');
const qrImg = document.getElementById('qrImg');
const langSelect = document.getElementById('langSelect');

/* populate static fields */
skuEl.textContent = 'SKU: ' + (product.sku || '-');
priceEl.textContent = '₹' + (product.price ? product.price.toLocaleString('en-IN') : '0');
pageUrlEl.textContent = location.origin + location.pathname + '?id=' + encodeURIComponent(product.id);

/* gallery */
mainImg.src = product.images && product.images[0] ? product.images[0] : '';
thumbs.innerHTML = '';
if(product.images && product.images.length){
  product.images.forEach((src,i)=>{
    const img = document.createElement('img'); img.src = src; img.alt='thumb';
    if(i===0) img.classList.add('active');
    img.onclick = ()=>{ mainImg.src = src; document.querySelectorAll('.thumbs img').forEach(t=>t.classList.remove('active')); img.classList.add('active'); }
    thumbs.appendChild(img);
  });
}

/* QR */
qrImg.src = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(location.origin + location.pathname + '?id=' + product.id + '&lang=' + LANG)}`;

/* language UI */
if(langSelect){
  langSelect.value = LANG;
  langSelect.addEventListener('change',(e)=>{
    LANG = e.target.value; applyLanguageToUI();
    pageUrlEl.textContent = location.origin + location.pathname + '?id=' + encodeURIComponent(product.id) + '&lang=' + LANG;
    qrImg.src = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(location.origin + location.pathname + '?id=' + product.id + '&lang=' + LANG)}`;
    initRecognition();
  });
}

function applyLanguageToUI(){
  if(LANG==='gu'){
    titleEl.textContent = product.title_gu || product.title;
    descEl.textContent = product.description_gu || product.description;
    document.getElementById('askBtn').textContent = 'આ ઉત્પાદન વિશે પૂછો';
    document.getElementById('buyBtn').textContent = 'ખરીદ / પૂછપરછ';
    const specsWrap=document.getElementById('specs'); specsWrap.innerHTML='';
    const srcSpecs = product.specs_gu || product.specs;
    for(const k in srcSpecs){ const div=document.createElement('div'); div.className='spec'; div.innerHTML=`<strong>${k}</strong><div style="color:var(--muted);margin-top:6px">${srcSpecs[k]}</div>`; specsWrap.appendChild(div); }
  } else {
    titleEl.textContent = product.title;
    descEl.textContent = product.description;
    document.getElementById('askBtn').textContent = 'Ask about this product';
    document.getElementById('buyBtn').textContent = 'Buy / Enquire';
    const specsWrap=document.getElementById('specs'); specsWrap.innerHTML='';
    const srcSpecs = product.specs;
    for(const k in srcSpecs){ const div=document.createElement('div'); div.className='spec'; div.innerHTML=`<strong>${k}</strong><div style="color:var(--muted);margin-top:6px">${srcSpecs[k]}</div>`; specsWrap.appendChild(div); }
  }
}
applyLanguageToUI();

/* ---- simple chat/voice assistant ---- */
const modal = document.getElementById('modalBackdrop');
const askBtn = document.getElementById('askBtn');
const closeModal = document.getElementById('closeModal');
const chatArea = document.getElementById('chatArea');
const micBtn = document.getElementById('micBtn');
const recStatus = document.getElementById('recStatus');
const sendBtn = document.getElementById('sendBtn');
const manualInput = document.getElementById('manualInput');

askBtn.onclick = ()=>{ openModal(); const welcome = (LANG==='gu') ? "મારા ઇલેક્ટ્રોનિક્સ દુકાનમાં આપનું સ્વાગત છે. હું આ પ્રોડક્ટ વિશે કેવી રીતે મદદ કરી શકું?" : "Welcome to my electronics shop. How can I help you about this product?"; addBotMsg((LANG==='gu') ? "સ્વાગત છે! આ પ્રોડક્ટ વિશે તમે શું જાણવા માંગો છો? (કિંમત, રંગ, ડિલિવરી, લાભો)" : "Welcome! How can I help you about this product? (Try: price, color, delivery, advantages)"); speakText(welcome); };
closeModal.onclick = ()=>{ closeModalFunc(); };

function openModal(){ modal.style.display='flex'; chatArea.innerHTML=''; recStatus.textContent='Idle'; }
function closeModalFunc(){ modal.style.display='none'; stopRecognition(); }

function addUserMsg(text){ const d=document.createElement('div'); d.className='msg me'; d.innerHTML=`<div class="bubble">${escapeHtml(text)}</div>`; chatArea.appendChild(d); chatArea.scrollTop=chatArea.scrollHeight; }
function addBotMsg(text){ const d=document.createElement('div'); d.className='msg'; d.innerHTML=`<div class="bubble bot">${escapeHtml(text)}</div>`; chatArea.appendChild(d); chatArea.scrollTop=chatArea.scrollHeight; }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

function speakText(txt){ if(!('speechSynthesis' in window)) return; try{ const u=new SpeechSynthesisUtterance(txt); u.lang=(LANG==='gu')?'gu-IN':'en-US'; window.speechSynthesis.cancel(); window.speechSynthesis.speak(u); }catch(e){ console.warn(e); } }

function answerQuestion(q){
  const text = q.toLowerCase();
  if(LANG==='gu'){
    if(/કિંમત|price|cost/.test(text)) return `આ મોડેલ (${product.title_gu||product.title}) ની કિંમત ₹${product.price.toLocaleString('en-IN')} છે.`;
    if(/રંગ|color|colour/.test(text)) return `આ મોડેલ ઉપલબ્ધ છે: ${(product.colors_gu||product.colors).join(', ')}.`;
    if(/ડિલિવરી|deliver|delivery|કેટલો સમય/.test(text)) return `અંદાજિત વિતરણ સમય: ${(product.specs_gu && product.specs_gu["Delivery"]) || product.specs["Delivery"] || 'સ્ટોર સાથે સંપર્ક કરો.'}`;
    if(/લાભ|advantage|benefit|feature/.test(text)) return `મુખ્ય લાભ: ${(product.advantages_gu||product.advantages).join('; ')}.`;
    if(/capacity|કિગ્રા/.test(text)) return `કેપેસિટી: ${(product.specs_gu && product.specs_gu["Capacity"]) || product.specs["Capacity"] || 'Not listed.'}`;
    if(/વોરંટી|warranty|guarantee/.test(text)) return `વોરંટી: ${(product.specs_gu && product.specs_gu["Warranty"]) || product.specs["Warranty"] || 'Not listed.'}`;
    return `માફ કરશો, મને સાચી રીતે સમજાતું ન હતું. તમે કિંમત, રંગ, ડિલિવરી, લાભો અથવા વોરંટી વિશે પુછો શકો છો.`;
  } else {
    if(/price|cost|how much/.test(text)) return `The price of this model (${product.title}) is ₹${product.price.toLocaleString('en-IN')}.`;
    if(/color|colour|available (in )?colors|which colors/.test(text)) return `This model is available in: ${product.colors.join(', ')}.`;
    if(/deliver|delivery|how long|time.*deliver|when.*deliver/.test(text)) return `Estimated delivery time: ${product.specs["Delivery"] || 'Contact store for exact timelines.'}`;
    if(/advantag|benefit|why should i buy|features|feature/.test(text)) return `Key advantages: ${product.advantages.join('; ')}.`;
    if(/capacity|kg|litre/.test(text)) return `Capacity: ${product.specs["Capacity"] || 'Not listed.'}`;
    if(/warranty|guarantee/.test(text)) return `Warranty: ${product.specs["Warranty"] || 'Warranty info not listed.'}`;
    return `Sorry, I didn't understand exactly. You can ask about price, colors, delivery time, advantages, capacity, or warranty.`;
  }
}

const sendBtnEl = document.getElementById('sendBtn');
sendBtnEl.onclick = ()=>{ const t=(manualInput.value||'').trim(); if(!t) return; addUserMsg(t); manualInput.value=''; const ans=answerQuestion(t); addBotMsg(ans); speakText(ans); };

/* SpeechRecognition */
let recognition=null, listening=false;
function initRecognition(){
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SpeechRecognition){ micBtn.disabled=true; recStatus.textContent='Speech recognition not supported'; return; }
  recognition = new SpeechRecognition();
  recognition.lang = (LANG==='gu') ? 'gu-IN' : 'en-IN';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  recognition.onstart = ()=>{ listening=true; recStatus.textContent='Listening...'; micBtn.textContent='🔴 Listening (click to stop)'; }
  recognition.onend = ()=>{ listening=false; recStatus.textContent='Idle'; micBtn.textContent='🎤 Start Listening'; }
  recognition.onerror = (ev)=>{ console.error(ev); recStatus.textContent = 'Error: ' + (ev.error || ev.message); }
  recognition.onresult = (ev)=>{ const transcript = ev.results[0][0].transcript; addUserMsg(transcript); const ans = answerQuestion(transcript); addBotMsg(ans); speakText(ans); }
}
function startRecognition(){ if(!recognition) initRecognition(); try{ recognition.start(); }catch(e){ console.warn(e); } }
function stopRecognition(){ try{ if(recognition) recognition.stop(); }catch(e){} }
micBtn.onclick = ()=>{ if(!recognition) initRecognition(); if(!recognition) return; if(!listening) startRecognition(); else stopRecognition(); }
initRecognition();

/* close modal on backdrop click */
document.getElementById('modalBackdrop').addEventListener('click',(ev)=>{ if(ev.target===document.getElementById('modalBackdrop')) closeModalFunc(); });
</script>
</body>
</html>


