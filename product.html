<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product ‚Äî Kalindi Tradelinks Pvt Ltd</title>
  <style>
    :root{
      --bg:#0f1723;
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent1:#7c3aed; /* violet */
      --accent2:#06b6d4; /* teal */
      --glass: rgba(255,255,255,0.03);
      font-family: Inter, system-ui, -apple-system, Roboto, 'Segoe UI', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg) 0%, #081018 100%);color:#e6eef6}
    .container{max-width:460px;margin:18px auto;padding:16px}

    /* Header */
    header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .logo-img{width:56px;height:56px;border-radius:10px;overflow:hidden;flex-shrink:0;box-shadow:0 4px 14px rgba(2,6,23,0.6)}
    .logo-img img{width:100%;height:100%;object-fit:contain;background:white}
    .shop{font-size:16px;font-weight:700}
    .sub{font-size:12px;color:var(--muted)}

    /* Card */
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:18px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}

    /* Image area */
    .gallery{position:relative;overflow:hidden;border-radius:14px}
    .slides{display:flex;transition:transform .36s cubic-bezier(.2,.9,.2,1)}
    .slides img{width:100%;height:320px;object-fit:cover;flex-shrink:0}
    .dots{display:flex;gap:6px;position:absolute;left:12px;bottom:10px}
    .dot{width:9px;height:9px;border-radius:6px;background:rgba(0,0,0,0.35);backdrop-filter:blur(6px)}
    .dot.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));box-shadow:0 4px 12px rgba(92,52,204,0.24)}

    /* Details */
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .title{font-size:18px;font-weight:700}
    .price{font-size:18px;font-weight:700;color:var(--accent2)}
    .rating{font-size:13px;color:var(--muted)}

    .desc{color:var(--muted);font-size:14px;margin-top:8px;line-height:1.45}

    .specs{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:12px}
    .spec{background:var(--glass);padding:10px;border-radius:10px;font-size:13px}

    /* Actions */
    .actions{display:flex;gap:8px;margin-top:14px}
    .btn{flex:1;padding:12px;border-radius:12px;border:0;font-weight:700;font-size:15px}
    .btn.buy{background:linear-gradient(90deg,var(--accent2),#10b981);color:#042022}
    .btn.cart{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    /* Voice Bot */
    .bot{display:flex;gap:10px;align-items:center;margin-top:14px;padding:10px;border-radius:12px;background:linear-gradient(90deg, rgba(124,58,237,0.08), rgba(6,182,212,0.05));}
    .mic{width:56px;height:56px;border-radius:12px;background:linear-gradient(180deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:18px;cursor:pointer}
    .mic.listening{box-shadow:0 8px 30px rgba(124,58,237,0.28);transform:scale(1.03)}
    .bot-info{flex:1}
    .bot-title{font-weight:700}
    .bot-sub{font-size:13px;color:var(--muted);margin-top:4px}
    .transcript{margin-top:8px;font-size:13px;color:var(--muted);min-height:20px}

    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    /* Responsive tweaks */
    @media (max-width:420px){
      .slides img{height:260px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo-img"><img src="assets/ktpl new logo.png" alt="Kalindi logo" /></div>
      <div>
        <div class="shop">Kalindi Tradelinks Pvt Ltd</div>
        <div class="sub">Mobile / Home Appliances</div>
      </div>
    </header>

    <main class="card">
      <div class="gallery" id="gallery">
        <div class="slides" id="slides">
          <img src="assets/wm1.avif" alt="product image 1" />
          <img src="assets/wm2.avif" alt="product image 2" />
          <img src="assets/wm3.avif" alt="product image 3" />
          <img src="assets/wm4.avif" alt="product image 4" />
          <img src="assets/wm5.avif" alt="product image 5" />
        </div>
        <div class="dots" id="dots"></div>
      </div>

      <div class="meta">
        <div>
          <div class="title">Samsung 12kg Front Load Washing Machine</div>
          <div class="rating">4.6 ‚òÖ  ‚Ä¢  1 year warranty</div>
        </div>
        <div class="price">‚Çπ65,000</div>
      </div>

      <p class="desc">Efficient front-load washing machine with multiple wash modes, low-noise motor and smart water saving technology. Perfect for small families and daily use.</p>

      <div class="specs">
        <div class="spec"><strong>Capacity</strong><div class="muted">7 kg</div></div>
        <div class="spec"><strong>Energy</strong><div class="muted">5 Star</div></div>
        <div class="spec"><strong>RPM</strong><div class="muted">1200</div></div>
        <div class="spec"><strong>Warranty</strong><div class="muted">1 year</div></div>
      </div>

      <div class="actions">
        <button class="btn buy">Buy Now</button>
        <button class="btn cart">Add to Cart</button>
      </div>

      <div class="bot" role="region" aria-label="Voice assistant">
        <div class="mic" id="mic">üéôÔ∏è</div>
        <div class="bot-info">
          <div class="bot-title">Product Voice Assistant</div>
          <div class="bot-sub">Tap mic and ask about product specs, usage or warranty. Supports Gujarati & English.</div>
          <div class="transcript" id="transcript"></div>
        </div>
      </div>

      <div style="margin-top:10px;font-size:13px;color:var(--muted)">Tip: For best results use Chrome on Android or desktop. iOS Safari has limited SpeechRecognition support.</div>
    </main>

    <footer>¬© Kalindi Tradelinks Pvt Ltd ‚Äî Scan QR on the product to open this page.</footer>
  </div>

  <script>
    // Simple slider
    const slides = document.getElementById('slides')
    const images = slides.querySelectorAll('img')
    const dots = document.getElementById('dots')
    let idx = 0
    function buildDots(){
      images.forEach((_,i)=>{
        const d = document.createElement('div')
        d.className='dot' + (i===0? ' active':'')
        d.addEventListener('click', ()=>{ goTo(i) })
        dots.appendChild(d)
      })
    }
    function update(){
      slides.style.transform = `translateX(${-idx * 100}%)`
      Array.from(dots.children).forEach((d,i)=> d.classList.toggle('active', i===idx))
    }
    function goTo(i){ idx = (i+images.length)%images.length; update() }
    buildDots()

    // Swipe support
    let startX = null
    const gallery = document.getElementById('gallery')
    gallery.addEventListener('touchstart', e=> startX = e.changedTouches[0].clientX)
    gallery.addEventListener('touchend', e=>{
      if(startX===null) return
      const endX = e.changedTouches[0].clientX
      const dx = endX - startX
      if(Math.abs(dx) > 40){ if(dx<0) idx = Math.min(idx+1, images.length-1); else idx = Math.max(idx-1,0); update() }
      startX = null
    })

    // Auto-advance
    setInterval(()=>{ idx = (idx+1) % images.length; update() }, 4500)

    // Voice bot using Web Speech API
    const micBtn = document.getElementById('mic')
    const transcriptEl = document.getElementById('transcript')

    const canned = [
      {q: /price|cost|‚Çπ|rupee/i, a: 'The price of this model is Sixty five thousand rupees only.', gu: '‡™Ü ‡™Æ‡´ã‡™°‡´á‡™≤‡™®‡´Ä ‡™ï‡™ø‡™Ç‡™Æ‡™§ ‡™∞‡´Ç .65,000 ‡™õ‡´á. ‡™∏‡´ç‡™ü‡´ã‡™∞‡™Æ‡™æ‡™Ç EMI ‡™Ö‡™®‡´á exchange ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™õ‡´á.'},
      {q: /stock|available|i, a: 'This model has only 4 pieces left in stock. We also offer EMI and exchange options in-store.', gu: '‡™Ü ‡™Æ‡´ã‡™°‡´á‡™≤‡™®‡™æ ‡™∏‡´ç‡™ü‡´ã‡™ï‡™Æ‡™æ‡™Ç ‡™´‡™ï‡´ç‡™§ 4 ‡™™‡´Ä‡™∏ ‡™¨‡™æ‡™ï‡´Ä ‡™õ‡´á. ‡™Ö‡™Æ‡´á ‡™∏‡´ç‡™ü‡´ã‡™∞‡™Æ‡™æ‡™Ç EMI ‡™Ö‡™®‡´á ‡™è‡™ï‡´ç‡™∏‡™ö‡´á‡™®‡´ç‡™ú ‡™µ‡™ø‡™ï‡™≤‡´ç‡™™‡´ã ‡™™‡™£ ‡™™‡´ç‡™∞‡™¶‡™æ‡™® ‡™ï‡™∞‡´Ä‡™è ‡™õ‡´Ä‡™è.'},
      {q: /warrant(y|ies)|guarantee/i, a: 'This product comes with a two year manufacturer warranty covering defects and parts.', gu: '‡™Ü ‡™â‡™§‡´ç‡™™‡™æ‡™¶‡™® ‡™∏‡™æ‡™•‡´á 2 ‡™µ‡™∞‡´ç‡™∑‡™®‡´Ä‡™µ‡™æ‡™∞‡™Ç‡™ü‡´Ä ‡™Æ‡™≥‡´á ‡™õ‡´á ‡™ú‡´á ‡™ñ‡™æ‡™Æ‡´Ä ‡™Ö‡™®‡´á ‡™≠‡™æ‡™ó‡´ã‡™®‡´á ‡™¢‡™ï‡´á ‡™õ‡´á.'},
      {q: /capacity|kg|weight/i, a: 'The machine has a 12 kilogram capacity ‚Äî suitable for small families.', gu: '‡™Ü ‡™Æ‡™∂‡´Ä‡™®‡™®‡´Ä ‡™ï‡´ç‡™∑‡™Æ‡™§‡™æ 12 ‡™ï‡™ø‡™ó‡´ç‡™∞‡™æ ‡™õ‡´á ‚Äî ‡™®‡™æ‡™®‡™æ‡™Ç ‡™™‡™∞‡™ø‡™µ‡™æ‡™∞‡´ã ‡™Æ‡™æ‡™ü‡´á ‡™™‡´Ç‡™∞‡™§‡´Ä.'},
      {q: /rpm|spin|speed/i, a: 'Maximum spin speed is 1200 RPM which helps remove more water and reduce drying time.', gu: '‡™Æ‡™π‡™§‡´ç‡™§‡™Æ ‡™∏‡´ç‡™™‡™ø‡™® ‡™∏‡´ç‡™™‡´Ä‡™° 1200 RPM ‡™õ‡´á ‡™ú‡´á ‡™µ‡™ß‡´Å ‡™™‡™æ‡™£‡´Ä ‡™¶‡´Ç‡™∞ ‡™ï‡™∞‡™µ‡™æ‡™Æ‡™æ‡™Ç ‡™Ö‡™®‡´á ‡™∏‡´Ç‡™ï‡™µ‡™æ‡™®‡´á ‡™ü‡´Ç‡™Ç‡™ï‡™æ‡™µ‡™Æ‡™æ‡™Ç ‡™Æ‡™¶‡™¶ ‡™ï‡™∞‡´á ‡™õ‡´á.'},
      {q: /energy|star/i, a: 'This is a 5-star energy rated appliance ‚Äî very efficient on power consumption.', gu: '‡™Ü ‡™è‡™ï 5-‡™∏‡´ç‡™ü‡™æ‡™∞ ‡™è‡™®‡™∞‡´ç‡™ú‡´Ä ‡™∞‡´á‡™ü‡´á‡™° ‡™â‡™™‡™ï‡™∞‡™£ ‡™õ‡´á ‚Äî ‡™™‡™æ‡™µ‡™∞ ‡™ñ‡™∞‡´ç‡™ö‡™Æ‡™æ‡™Ç ‡™ñ‡´Ç‡™¨ ‡™Ö‡™∏‡™∞‡™ï‡™æ‡™∞‡™ï.'},
      {q: /how to clean|clean|care/i, a: 'Use a mild detergent, run monthly drum clean cycle and wipe the door seal to avoid residue.', gu: '‡™π‡™≥‡™µ‡´ã ‡™°‡™ø‡™ü‡™∞‡´ç‡™ú‡´á‡™®‡´ç‡™ü ‡™µ‡™æ‡™™‡™∞‡´ã, ‡™Æ‡™æ‡™∏‡™ø‡™ï ‡™°‡´ç‡™∞‡™Æ ‡™ï‡´ç‡™≤‡´Ä‡™® ‡™∏‡™æ‡™à‡™ï‡™≤ ‡™ö‡™≤‡™æ‡™µ‡´ã ‡™Ö‡™®‡´á ‡™°‡´ã‡™∞ ‡™∏‡´Ä‡™≤ ‡™∏‡™æ‡™´ ‡™ï‡™∞‡´ã.'},
      {q: /default/i, a: 'Sorry, I do not have that exact information. You can ask about price, capacity, warranty or cleaning and I will answer.', gu: '‡™Æ‡™æ‡™´ ‡™ï‡™∞‡™∂‡´ã, ‡™Æ‡™æ‡™∞‡™æ ‡™™‡™æ‡™∏‡´á ‡™§‡´á ‡™ö‡´ã‡™ï‡´ç‡™ï‡™∏ ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä ‡™®‡™•‡´Ä. ‡™§‡™Æ‡´á ‡™ï‡™ø‡™Ç‡™Æ‡™§, ‡™ï‡´ç‡™∑‡™Æ‡™§‡™æ, ‡™µ‡´ã‡™∞‡™Ç‡™ü‡´Ä ‡™Ö‡™•‡™µ‡™æ ‡™∏‡™´‡™æ‡™à ‡™µ‡™ø‡™∂‡´á ‡™™‡´Ç‡™õ‡´ã.'}
      {q: /brand|company|model/i, a: 'This model is from ABC Electronics, known for durability and advanced features.', gu: '‡™Ü ‡™Æ‡´ã‡™°‡´á‡™≤ ABC ‡™á‡™≤‡´á‡™ï‡´ç‡™ü‡´ç‡™∞‡´ã‡™®‡™ø‡™ï‡´ç‡™∏‡™®‡´Å‡™Ç ‡™õ‡´á, ‡™ú‡´á ‡™ü‡™ï‡™æ‡™â‡™™‡™£‡´Å‡™Ç ‡™Ö‡™®‡´á ‡™Ö‡™¶‡´ç‡™Ø‡™§‡™® ‡™∏‡´Å‡™µ‡™ø‡™ß‡™æ‡™ì ‡™Æ‡™æ‡™ü‡´á ‡™ú‡™æ‡™£‡´Ä‡™§‡´Å‡™Ç ‡™õ‡´á.'},
      {q: /size|dimension|height|width|depth/i, a: 'The machine measures 85 cm in height, 60 cm in width and 55 cm in depth.', gu: '‡™Ü ‡™Æ‡™∂‡´Ä‡™®‡™®‡´Ä ‡™ä‡™Ç‡™ö‡™æ‡™à 85 ‡™∏‡´á‡™Æ‡´Ä, ‡™™‡™π‡´ã‡™≥‡™æ‡™à 60 ‡™∏‡´á‡™Æ‡´Ä ‡™Ö‡™®‡´á ‡™ä‡™Ç‡™°‡™æ‡™à 55 ‡™∏‡´á‡™Æ‡´Ä ‡™õ‡´á.'},
      {q: /water|litre|consumption/i, a: 'This model consumes approximately 60 liters of water per full wash cycle.', gu: '‡™Ü ‡™Æ‡´ã‡™°‡´á‡™≤ ‡™¶‡™∞‡´á‡™ï ‡™™‡´Ç‡™∞‡´ç‡™£ ‡™µ‡´ã‡™∂ ‡™∏‡™æ‡™Ø‡™ï‡™≤‡™Æ‡™æ‡™Ç ‡™Ö‡™Ç‡™¶‡™æ‡™ú‡´á 60 ‡™≤‡™ø‡™ü‡™∞ ‡™™‡™æ‡™£‡´Ä ‡™µ‡™æ‡™™‡™∞‡´á ‡™õ‡´á.'},
      {q: /water|litre|consumption/i, a: 'This model consumes approximately 60 liters of water per full wash cycle.', gu: '‡™Ü ‡™Æ‡´ã‡™°‡´á‡™≤ ‡™¶‡™∞‡´á‡™ï ‡™™‡´Ç‡™∞‡´ç‡™£ ‡™µ‡´ã‡™∂ ‡™∏‡™æ‡™Ø‡™ï‡™≤‡™Æ‡™æ‡™Ç ‡™Ö‡™Ç‡™¶‡™æ‡™ú‡´á 60 ‡™≤‡™ø‡™ü‡™∞ ‡™™‡™æ‡™£‡´Ä ‡™µ‡™æ‡™™‡™∞‡´á ‡™õ‡´á.'},
      {q: /noise|sound|db|decibel/i, a: 'The machine operates at 52 dB during wash and 72 dB during spin ‚Äî relatively quiet.', gu: '‡™Ü ‡™Æ‡™∂‡´Ä‡™® ‡™ß‡´ã‡™µ‡™æ‡™®‡´Ä ‡™™‡´ç‡™∞‡™ï‡´ç‡™∞‡™ø‡™Ø‡™æ‡™Æ‡™æ‡™Ç 52 dB ‡™Ö‡™®‡´á ‡™∏‡´ç‡™™‡™ø‡™® ‡™¶‡™∞‡™Æ‡™ø‡™Ø‡™æ‡™® 72 dB ‡™™‡™∞ ‡™ï‡™æ‡™∞‡´ç‡™Ø ‡™ï‡™∞‡´á ‡™õ‡´á ‚Äî ‡™§‡´Å‡™≤‡™®‡™æ‡™§‡´ç‡™Æ‡™ï ‡™∞‡´Ä‡™§‡´á ‡™∂‡™æ‡™Ç‡™§ ‡™õ‡´á.'},
      {q: /delivery|install|setup/i, a: 'Free delivery and installation are provided within city limits.', gu: '‡™∂‡™π‡´á‡™∞‡™®‡´Ä ‡™Ö‡™Ç‡™¶‡™∞ ‡™Æ‡™´‡™§ ‡™°‡™ø‡™≤‡™ø‡™µ‡™∞‡´Ä ‡™Ö‡™®‡´á ‡™á‡™®‡´ç‡™∏‡´ç‡™ü‡´ã‡™≤‡´á‡™∂‡™® ‡™Ü‡™™‡™µ‡™æ‡™Æ‡™æ‡™Ç ‡™Ü‡™µ‡´á ‡™õ‡´á.'},
      {q: /offer|discount|deal|sale/i, a: 'We currently have a festive discount available. Please check in-store for final price.', gu: '‡™π‡™æ‡™≤‡™Æ‡™æ‡™Ç ‡™§‡™π‡´á‡™µ‡™æ‡™∞‡´ã‡™Æ‡™æ‡™Ç ‡™°‡™ø‡™∏‡´ç‡™ï‡™æ‡™â‡™®‡´ç‡™ü ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™õ‡´á. ‡™Ö‡™Ç‡™§‡™ø‡™Æ ‡™ï‡™ø‡™Ç‡™Æ‡™§ ‡™Æ‡™æ‡™ü‡´á ‡™∏‡´ç‡™ü‡´ã‡™∞‡™Æ‡™æ‡™Ç ‡™§‡™™‡™æ‡™∏‡´ã.'},
      {q: /service|repair|support|help/i, a: 'We provide doorstep service and free checkups during warranty period.', gu: '‡™Ö‡™Æ‡´á ‡™µ‡´ã‡™∞‡™Ç‡™ü‡´Ä ‡™∏‡™Æ‡™Ø‡™ó‡™æ‡™≥‡™æ ‡™¶‡™∞‡™Æ‡™ø‡™Ø‡™æ‡™® ‡™°‡´ã‡™∞‡™∏‡´ç‡™ü‡´á‡™™ ‡™∏‡™∞‡´ç‡™µ‡™ø‡™∏ ‡™Ö‡™®‡´á ‡™Æ‡™´‡™§ ‡™ö‡´á‡™ï‡™Ö‡™™‡´ç‡™∏ ‡™™‡´ç‡™∞‡™¶‡™æ‡™® ‡™ï‡™∞‡´Ä‡™è ‡™õ‡´Ä‡™è.'},
      {q: /exchange|old machine|return/i, a: 'You can exchange your old appliance and get up to ‚Çπ5,000 off.', gu: '‡™§‡™Æ‡´á ‡™§‡™Æ‡™æ‡™∞‡´Å‡™Ç ‡™ú‡´Ç‡™®‡´Å‡™Ç ‡™â‡™™‡™ï‡™∞‡™£ ‡™è‡™ï‡´ç‡™∏‡™ö‡´á‡™®‡´ç‡™ú ‡™ï‡™∞‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã ‡™Ö‡™®‡´á ‚Çπ5,000 ‡™∏‡´Å‡™ß‡´Ä‡™®‡´Ä ‡™õ‡´Ç‡™ü ‡™Æ‡´á‡™≥‡™µ‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã.'},
    ]

    function speak(text, lang='gu-IN'){
      if(!('speechSynthesis' in window)) return alert('Your browser does not support speech synthesis')
      const ut = new SpeechSynthesisUtterance(text)
      ut.lang = lang
      ut.rate = 1
      window.speechSynthesis.cancel()
      window.speechSynthesis.speak(ut)
    }

    // Recognition
    let recognition = null
    if(window.SpeechRecognition || window.webkitSpeechRecognition){
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition
      recognition = new SR()
      recognition.lang = 'gu-IN' // prefer English but will capture many inputs; Gujarati capture works better on Chrome with 'gu-IN'
      recognition.interimResults = false
      recognition.maxAlternatives = 1
      recognition.onresult = (e)=>{
        const text = e.results[0][0].transcript
        transcriptEl.textContent = 'You: ' + text
        handleQuery(text)
      }
      recognition.onend = ()=> micBtn.classList.remove('listening')
      recognition.onerror = (ev)=>{
        transcriptEl.textContent = 'Error: ' + ev.error
        micBtn.classList.remove('listening')
      }
    }

    micBtn.addEventListener('click', ()=>{
      if(!recognition){
        // Fallback: ask user to type
        const q = prompt('Speech recognition not supported. Type your question:')
        if(q) { transcriptEl.textContent = 'You: ' + q; handleQuery(q) }
        return
      }
      try{
        micBtn.classList.add('listening')
        transcriptEl.textContent = 'Listening...'
        recognition.start()
      }catch(err){ micBtn.classList.remove('listening') }
    })

    function isGujarati(text){ return /[‡™Ä-‡´ø]/.test(text) }

    function handleQuery(text){
      const t = text.toLowerCase()
      let found = canned.find(c=> c.q.test(t))
      if(!found) found = canned.find(c=> /default/i.test(c.q))

      const useGu = isGujarati(text)
      const answer = useGu ? (found.gu || found.a) : found.a
      transcriptEl.textContent = (useGu? '‡™∏‡™π‡™æ‡™Ø‡™ï: ' : 'Assistant: ') + answer
      speak(answer, useGu? 'gu-IN' : 'en-IN')

      // Optional: call backend for dynamic reply (recommended for production)
      // fetch('/api/openai-reply', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({question: text, productId: 'superwash-7kg'})})
      //  .then(r=>r.json()).then(data=>{ transcriptEl.textContent = 'Assistant: ' + data.reply; speak(data.reply) })
    }

    // Accessibility: keyboard trigger
    micBtn.tabIndex = 0
    micBtn.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' ') micBtn.click() })

    // Replace AVIF fallback (optional): if browser doesn't support avif, swap to jpg
    (function(){
      const testImg = new Image()
      testImg.onload = ()=>{
        // supported
      }
      testImg.onerror = ()=>{
        document.querySelectorAll('img').forEach(img=>{
          img.src = img.src.replace('.avif', '.jpg')
        })
      }
      testImg.src = 'data:image/avif;base64,AAAA' // small broken avif to test
    })()
  </script>
</body>
</html>



